<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>OmniSoin - Dashboard M√©decin</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#f5f7fa;height:100vh;display:flex}.sidebar{width:260px;background:linear-gradient(180deg,#0073AA,#005A87);color:#fff;padding:30px 20px}.logo{font-size:24px;font-weight:700;margin-bottom:40px}.menu-item{padding:15px;border-radius:10px;cursor:pointer;transition:.3s;margin-bottom:10px}.menu-item:hover,.menu-item.active{background:rgba(255,255,255,.2)}.main-content{flex:1;padding:30px;overflow-y:auto}.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.header h1{font-size:32px;color:#2c3e50}.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}.stat-card{background:#fff;padding:25px;border-radius:15px;box-shadow:0 2px 10px rgba(0,0,0,.05)}.stat-number{font-size:36px;font-weight:700;color:#0073AA;margin:10px 0}.patients-list{background:#fff;border-radius:15px;padding:25px;box-shadow:0 2px 10px rgba(0,0,0,.05)}.patient-card{border-left:4px solid #0073AA;padding:20px;margin-bottom:15px;background:#f8f9fa;border-radius:8px;cursor:pointer;transition:.3s}.patient-card:hover{transform:translateX(5px);box-shadow:0 4px 12px rgba(0,115,170,.2)}.patient-header{display:flex;justify-content:space-between;margin-bottom:10px}.patient-id{font-weight:600;font-size:16px}.urgence{padding:5px 15px;border-radius:20px;font-size:12px;font-weight:600}.urgence-high{background:#f8d7da;color:#721c24}.urgence-medium{background:#fff3cd;color:#856404}.urgence-low{background:#d4edda;color:#155724}
</style>
</head>
<body>
<div class="sidebar">
<div class="logo">üè• OmniSoin</div>
<div class="menu-item active">üìã Patients en attente</div>
<div class="menu-item">‚úÖ Valid√©s</div>
<div class="menu-item">üìä Statistiques</div>
<div class="menu-item">‚öôÔ∏è Param√®tres</div>
</div>
<div class="main-content">
<div class="header">
<h1>Dashboard M√©decin</h1>
<div style="color:#6c757d">Dr. MSP Faidherbe ‚Ä¢ <span id="datetime"></span></div>
</div>
<div class="stats">
<div class="stat-card">
<div style="color:#6c757d">Patients en attente</div>
<div class="stat-number" id="statPending">-</div>
</div>
<div class="stat-card">
<div style="color:#6c757d">Urgences √©lev√©es</div>
<div class="stat-number" style="color:#dc3545" id="statUrgent">-</div>
</div>
<div class="stat-card">
<div style="color:#6c757d">Trait√©s aujourd'hui</div>
<div class="stat-number" style="color:#28a745" id="statToday">0</div>
</div>
</div>
<div class="patients-list">
<h2 style="margin-bottom:20px;color:#2c3e50">Patients en attente</h2>
<div id="patientsList"><div style="text-align:center;padding:40px;color:#6c757d">Chargement des dossiers patients...</div></div>
</div>
</div>
<script>
const AIRTABLE={baseId:'appbx1CGa66eq8pqX',tableId:'tblEYIJIdgImrujoN',apiKey:'VOTRE_API_KEY_ICI'};
function updateDateTime(){document.getElementById('datetime').textContent=new Date().toLocaleString('fr-FR')}
updateDateTime();setInterval(updateDateTime,60000);
async function loadPatients(){
try{
const r=await fetch(`https://api.airtable.com/v0/${AIRTABLE.baseId}/${AIRTABLE.tableId}`,{headers:{'Authorization':`Bearer ${AIRTABLE.apiKey}`}});
const d=await r.json();
document.getElementById('statPending').textContent=d.records.length;
document.getElementById('statUrgent').textContent=d.records.filter(r=>extractUrgence(r.fields.Notes||'')>=4).length;
document.getElementById('patientsList').innerHTML=d.records.map(rec=>{
const fields=rec.fields;
const patientId=fields.Name||'ID inconnu';
const notes=fields.Notes||'Pas de notes';
const urgenceLevel=extractUrgence(notes);
const urgenceClass=urgenceLevel>3?'urgence-high':(urgenceLevel>2?'urgence-medium':'urgence-low');
const urgenceText=['','Faible','Faible','Mod√©r√©e','√âlev√©e','Critique'][urgenceLevel];
return`<div class="patient-card" onclick="openPatient('${rec.id}')">
<div class="patient-header">
<div class="patient-id">üîπ ${patientId}</div>
<span class="urgence ${urgenceClass}">‚ö†Ô∏è ${urgenceText}</span>
</div>
<div style="color:#6c757d;font-size:14px;margin-bottom:10px">üìÇ Consultation g√©n√©rale</div>
<div style="color:#495057;line-height:1.6;font-size:14px">${notes.substring(0,200)}...</div>
</div>`;
}).join('');
}catch(e){
console.error('Erreur Airtable:',e);
document.getElementById('patientsList').innerHTML='<div style="text-align:center;color:#dc3545;padding:40px">‚ö†Ô∏è Erreur de connexion √† Airtable<br><small>V√©rifiez votre configuration API</small></div>';
}
}
function extractUrgence(text){
if(text.includes('urgence: 5')||text.includes('critique'))return 5;
if(text.includes('urgence: 4')||text.includes('√©lev√©e'))return 4;
if(text.includes('urgence: 3')||text.includes('mod√©r√©e'))return 3;
return 2;
}
function openPatient(recordId){alert(`Ouverture du dossier ${recordId}\n\n(Fonctionnalit√© compl√®te en Phase 2)`)}
loadPatients();
setInterval(loadPatients,30000);
</script>
</body>
</html>
